dataSource:
  name: AggTestJobConfig
  rootPath: s3://datasource-bucket
  prefix: /prefix/date={dateStr}/hour={hourInt}/
  format: parquet

aggLevels:
  - level: AdvertiserId
    saltSize: 10
    initAggGrains: [ hour ]
    initWritePartitions: 10
  - level: CampaignId
    saltSize: 10
    initAggGrains: [ hour ]
    initWritePartitions: 10
  - level: TDID
    saltSize: -1
    initAggGrains: [ hour, day ]
    initWritePartitions: 10
    rollupWritePartitions: 10

initAggConfig:
  outputRootPath: s3://datasource-bucket
  outputPrefix: /prefix/initAgg/date={dateStr}/hour={hourInt}/

rollupAggConfig:
  outputRootPath: s3://datasource-bucket
  outputPrefix: /prefix/rollupAgg/date={dateStr}/hour={hourInt}/
  windowGrain: day

aggregations:
  - field: FieldA
    dataType: array_int
    aggWindows: [ 1, 3, 7 ]
    windowUnit: day
    aggFunc: [ frequency ]
  - field: FieldB
    dataType: array_float
    aggWindows: [ 1, 3, 7 ]
    windowUnit: day
    aggFunc: [ mean, max ]
  - field: FieldC
    dataType: vector
    aggWindows: [ 1, 3, 7 ]
    windowUnit: day
    topN: 15
    aggFunc: [ count ]
  - field: FieldA_Frequency # FieldA_Frequency is a conflict with FieldA with function Frequency
    dataType: array_int
    aggWindows: [ 1, 3, 7 ]
    windowUnit: day
    topN: 15
    aggFunc: [ Frequency ]